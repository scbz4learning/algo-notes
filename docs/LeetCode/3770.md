---
title: 3770. Largest Prime from Consecutive Prime Sum
tags:
  - prime
  - medium
---

## Question
[3770. Largest Prime from Consecutive Prime Sum](https://leetcode.com/problems/largest-prime-from-consecutive-prime-sum/description/)

> **题目：从连续素数和中找出最大素数**
>
> 给定一个整数 `n`，返回小于或等于 `n` 的最大素数，该素数可以表示为从 2 开始的一个或多个连续素数之和。如果没有这样的素数，返回 0。
>
> **例子 1**：
> 输入: `n = 20`  
> 输出: `17`
>
> **解释**：
> 小于或等于 `n = 20` 的连续素数和是：
> - 2 = 2
> - 5 = 2 + 3
> - 17 = 2 + 3 + 5 + 7
> 
> 最大的是 17，所以答案是 17。
>
> **例子 2**：
> 输入: `n = 2`  
> 输出: `2`
>
> **解释**：
> 小于或等于 `2` 的唯一连续素数和是 2 本身。
>
> **限制**：
> - 1 <= `n` <= 5 * 10^5


## Solution

### TLE

```cpp
class Solution {
public:
    int largestPrime(int n) {
        vector<int> primes;
        int last = 1;
        while (++last < n) {
            for (auto it = primes.begin(); it < primes.end(); it++) {
                if (! (last % (*it)))
                    break;
            }
            primes.push_back(last);
        }
        int ans = 0, prefix = 0;
        for (int i = 0; i < primes.size(); i++) {
            prefix += primes[i];
            auto it = find(primes.begin(), primes.end(), prefix);
            if (it != primes.end() && *it < n) {
                ans = prefix;
            }
        }
        return ans;
    }
};
```

### AC
```cpp
class Solution {
public:
    bool isPrime (int x) {
        if (x < 2)
            return false;
        for (int i = 2; i * i < x; i++){
            if (!(x % i))
                return false;
        }
        return true;
    }
    int largestPrime(int n) {
        int ans = 0, prefix = 0;
        for (int i = 2; i <= n; i++) {
            if (!isPrime(i))
                continue;
            prefix += i;
            if (prefix > n)
                break;
            if (isPrime(prefix))
                ans = prefix;
        }
        return ans;
    }
};
```

## 总结
1. dp 不管用, 因为之前的素数新的遍历会舍弃掉  
2. 判断质数 3 个问题:
    1. `for` 从 2 开始  
    2. `for` 的循环终止条件 `i * i <= x` 必须要 `<=`, 不然 `9 % 3 = 0` 但是 `3 * 3 < 9` 为假, 所以被提前跳过了.  
    3.  `if (!(x % i))` 没有余数 -> 整除 -> 不是质数 -> 返回 false  