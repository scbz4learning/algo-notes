---
title: 3769. Sort Integers by Binary Reflection
date: 2025-12-09
tags:
  - syntax
  - sort
---

# [3769. Sort Integers by Binary Reflection](https://leetcode.com/problems/sort-integers-by-binary-reflection/description/)


## Question 

> **题目：按二进制反转排序整数**
>
> 给定一个整数数组 `nums`，你需要按每个数字的二进制反转后的值对数组进行升序排序。
>
> **二进制反转**是指：先将一个正整数转换为二进制，然后将其二进制位反转，再将反转后的二进制数作为十进制数。
>
> **排序规则**：
> 1. 先按每个数字的二进制反转后的值排序。
> 2. 如果两个数字的二进制反转值相同，则按原数字的大小排序。
>
> 返回排序后的数组。
>
> **例子 1**：
> 输入: `nums = [4,5,4]`  
> 输出: `[4,4,5]`
>
> **解释**：
> - 4的二进制是 `100`，反转后是 `001`，即十进制数是 1。
> - 5的二进制是 `101`，反转后是 `101`，即十进制数是 5。
> - 排序后得到 `[4,4,5]`。
>
> **例子 2**：
> 输入: `nums = [3,6,5,8]`  
> 输出: `[8,3,6,5]`
>
> **解释**：
> - 3的二进制是 `11`，反转后是 `11`，即十进制数是 3。
> - 6的二进制是 `110`，反转后是 `011`，即十进制数是 3。
> - 5的二进制是 `101`，反转后是 `101`，即十进制数是 5。
> - 8的二进制是 `1000`，反转后是 `0001`，即十进制数是 1。
> - 排序后得到 `[8,3,6,5]`。
>
> **注意**：
> - 如果两个数字的反转值相同，按照原数字大小排序。
>
> **限制**：
> - 1 <= `nums.length` <= 100
> - 1 <= `nums[i]` <= 10^9


## Hint:  

- sort 支持闭包

研究下 `sort`:  

<div>
<iframe src="https://en.cppreference.com/w/cpp/algorithm/sort.html"></iframe>
</div>

收获:  

1. `(constexpr since C++20)` 是指增加一个 constexpr 重载, 因为显然绝大多数用sort 的时候都不是针对编译器已知的值.  
2. `sort(opt policy, first, last, opt comp)`  
  1. policy 是说执行方式, 比如: 
    - 串行执行(std::execution::seq)  
    - 并行执行策略（std::execution::par）  
    - 并行无序执行策略（std::execution::par_unseq）  
    
    默认是串行的, 即使在 `make -jx` 中.
  
  2. comp 是个函数, 类似于 `operator<` 或者 `std::less` 的重载, 返回一个 bool 值 

3. complexity $O(N \log (Comp(N)))$  
  为什么?  


## Solution:

```c++
include <bits/stdc++.h>

class Solution {
public:
    int toIndex(int x) {
        int ans = 0;
        for (; x; x >>= 1) {
            ans += (x & 1);
            ans <<= 1;
        }
        return ans;
    }
    vector<int> sortByReflection(vector<int>& nums) {
        sort (
            nums.begin(),
            nums.end(),
            [&](int x, int y) {
                return toIndex(x) == toIndex(y)
                    ? x < y
                    : toIndex(x) < toIndex(y);
            }
        );
        return nums;
    }
};
```